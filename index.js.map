{"version":3,"file":"index.js","sources":["../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["import { refs } from './refs.js';\nimport { getFromStorage } from './storage.js';\n\n//Допоміжні функції\nexport function updateCounters() {\n  const cartItems = getFromStorage('cart');\n  const wishlistItems = getFromStorage('wishlist');\n  console.log('Update counters:', cartItems.length, wishlistItems.length);\n\n  refs.countCart.textContent = cartItems.length;\n  refs.countWishlist.textContent = wishlistItems.length;\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nconst scrollBtn = document.querySelector('.scroll-up');\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 300) {\n    scrollBtn.hidden = false;\n  } else {\n    scrollBtn.hidden = true;\n  }\n});\n\nscrollBtn.addEventListener('click', () => {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n});\n","import { refs } from './refs.js';\nimport { isInStorage, toggleItemInStorage } from './storage.js';\nimport { updateCounters } from './helpers.js';\n\n//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nexport function renderModalContent(product) {\n  const { id, thumbnail, title, description, price, category, brand } = product;\n\n  const inWishlist = isInStorage('wishlist', id);\n  const inCart = isInStorage('cart', id);\n\n  const modalProduct = refs.modalContent.querySelector('.modal-product');\n  if (!modalProduct) return console.error('modal-product not found');\n\n  modalProduct.innerHTML = `\n    <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n    <div class=\"modal-product__content\">\n      <p class=\"modal-product__title\">${title}</p>\n      <ul class=\"modal-product__tags\">\n        <li>Brand: ${brand}</li>\n        <li>Category: ${category}</li>\n      </ul>\n      <p class=\"modal-product__description\">${description}</p>\n      <p class=\"modal-product__shipping-information\">Shipping: Free</p>\n      <p class=\"modal-product__return-policy\">Return Policy: 30 days</p>\n      <p class=\"modal-product__price\">Price: $${price}</p>\n    </div>\n  `;\n\n  const wishlistBtn = refs.modalContent.querySelector(\n    '.modal-product__btn--wishlist'\n  );\n  const cartBtn = refs.modalContent.querySelector('.modal-product__btn--cart');\n\n  if (wishlistBtn) {\n    wishlistBtn.textContent = inWishlist\n      ? 'Remove from Wishlist'\n      : 'Add to Wishlist';\n    wishlistBtn.dataset.id = id;\n  }\n\n  if (cartBtn) {\n    cartBtn.textContent = inCart ? 'Remove from Cart' : 'Add to Cart';\n    cartBtn.dataset.id = id;\n  }\n}\n\nexport function openModal() {\n  refs.modal.classList.add('modal--is-open');\n  window.addEventListener('keydown', handleEsc);\n}\n\nexport function closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n  const modalProduct = refs.modalContent.querySelector('.modal-product');\n  if (modalProduct) {\n    modalProduct.innerHTML = '';\n  }\n  window.removeEventListener('keydown', handleEsc);\n}\n\nfunction handleEsc(event) {\n  if (event.key === 'Escape') closeModal();\n}\n\nrefs.modal.addEventListener('click', event => {\n  if (\n    event.target === refs.modal ||\n    event.target.closest('.modal__close-btn')\n  ) {\n    closeModal();\n  }\n});\n\nrefs.modalContent.addEventListener('click', event => {\n  const wishlistBtn = event.target.closest('.modal-product__btn--wishlist');\n  const cartBtn = event.target.closest('.modal-product__btn--cart');\n\n  if (wishlistBtn) {\n    const id = +wishlistBtn.dataset.id;\n    console.log('Wishlist toggle', id);\n    toggleItemInStorage('wishlist', id);\n    wishlistBtn.textContent = isInStorage('wishlist', id)\n      ? 'Remove from Wishlist'\n      : 'Add to Wishlist';\n    updateCounters();\n  }\n\n  if (cartBtn) {\n    const id = +cartBtn.dataset.id;\n    console.log('Cart toggle', id);\n    toggleItemInStorage('cart', id);\n    cartBtn.textContent = isInStorage('cart', id)\n      ? 'Remove from Cart'\n      : 'Add to Cart';\n    updateCounters();\n  }\n});\n","import {\n  getProducts,\n  getProductsByCategory,\n  getProductsById,\n  getProductsByQuery,\n} from './products-api.js';\nimport { renderProducts } from './render-function.js';\nimport { refs } from './refs.js';\nimport { renderModalContent, openModal } from './modal.js';\nimport iziToast from 'izitoast';\n\n// Функції, які передаються колбеками в addEventListners\nexport async function handleClickCategory(event) {\n  const clickedBtn = event.target.closest('.categories__btn');\n  if (!clickedBtn) return;\n\n  const category = clickedBtn.textContent.trim();\n  const buttons = refs.categoriesList.querySelectorAll('.categories__btn');\n\n  buttons.forEach(btn => btn.classList.remove('categories__btn--active'));\n  clickedBtn.classList.add('categories__btn--active');\n\n  refs.productsList.innerHTML = '';\n  refs.notFound.classList.remove('not-found--visible');\n\n  try {\n    let products = [];\n\n    if (category === 'All') {\n      const res = await getProducts({ limit: 12, skip: 0 });\n      products = res;\n    } else {\n      products = await getProductsByCategory(category);\n    }\n\n    if (products.length === 0) {\n      refs.notFound.classList.add('not-found--visible');\n    } else {\n      renderProducts(products);\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Error loading products. Try again later',\n      position: 'topRight',\n    });\n  }\n}\n\nexport async function handleClickProduct(event) {\n  const li = event.target.closest('li.products__item');\n  if (!li) return;\n\n  const id = li.dataset.id;\n  if (!id) return;\n\n  try {\n    const product = await getProductsById(id);\n    renderModalContent(product);\n    openModal();\n  } catch (error) {\n    iziToast.error({\n      message: 'Unable to load product',\n      position: 'topRight',\n    });\n  }\n}\n\nexport async function handleSearchSubmit(event) {\n  event.preventDefault();\n\n  const query = refs.searchInput.value.trim();\n  refs.productsList.innerHTML = '';\n  refs.notFound.classList.remove('not-found--visible');\n\n  if (query === '') return;\n\n  try {\n    const results = await getProductsByQuery(query);\n\n    if (results.length === 0) {\n      refs.notFound.classList.add('not-found--visible');\n    } else {\n      renderProducts(results.slice(0, 12));\n    }\n  } catch (err) {\n    iziToast.error({ message: 'Product search error', position: 'topRight' });\n  }\n}\n\nexport async function handleClearSearch() {\n  refs.searchInput.value = '';\n  refs.clearSearchBtn.hidden = true;\n  refs.notFound.classList.remove('not-found--visible');\n  refs.productsList.innerHTML = '';\n\n  try {\n    const products = await getProducts({ limit: 12, skip: 0 });\n    renderProducts(products);\n  } catch {\n    iziToast.error({\n      message: 'Failed to load products',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function handleSearchInput(event) {\n  const query = event.target.value.trim();\n  refs.clearSearchBtn.hidden = query === '';\n}\n","//Логіка сторінки Home\nimport { renderCategories, renderProducts } from './js/render-function.js';\nimport { refs } from './js/refs.js';\nimport { getCategories, getProducts } from './js/products-api.js';\nimport {\n  handleClickCategory,\n  handleClickProduct,\n  handleSearchSubmit,\n  handleSearchInput,\n  handleClearSearch,\n} from './js/handlers.js';\nimport { showLoader, hideLoader } from './js/helpers.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nconst limit = 12;\n\ngetCategories()\n  .then(categories => {\n    renderCategories(['All', ...categories]);\n  })\n  .catch(() => {\n    iziToast.error({ message: 'Categories could not be loaded!' });\n  });\n\nasync function loadProducts() {\n  showLoader();\n  await new Promise(r => setTimeout(r, 0)); // дозволити браузеру оновити UI\n  try {\n    const skip = (currentPage - 1) * limit;\n    const products = await getProducts({ limit, skip });\n    renderProducts(products);\n  } catch (err) {\n    iziToast.error({ message: 'Products could not be loaded!' });\n  } finally {\n    hideLoader();\n  }\n}\n\nloadProducts();\n\nrefs.categoriesList.addEventListener('click', handleClickCategory);\nrefs.productsList.addEventListener('click', handleClickProduct);\nrefs.searchForm.addEventListener('submit', handleSearchSubmit);\nrefs.searchInput.addEventListener('input', handleSearchInput);\nrefs.clearSearchBtn.addEventListener('click', handleClearSearch);\n"],"names":["updateCounters","cartItems","getFromStorage","wishlistItems","refs","showLoader","hideLoader","scrollBtn","renderModalContent","product","id","thumbnail","title","description","price","category","brand","inWishlist","isInStorage","inCart","modalProduct","wishlistBtn","cartBtn","openModal","handleEsc","closeModal","event","toggleItemInStorage","handleClickCategory","clickedBtn","btn","products","getProducts","getProductsByCategory","renderProducts","iziToast","handleClickProduct","li","getProductsById","handleSearchSubmit","query","results","getProductsByQuery","handleClearSearch","handleSearchInput","currentPage","limit","getCategories","categories","renderCategories","loadProducts","r","skip"],"mappings":"0JAIO,SAASA,GAAiB,CAC/B,MAAMC,EAAYC,EAAe,MAAM,EACjCC,EAAgBD,EAAe,UAAU,EAC/C,QAAQ,IAAI,mBAAoBD,EAAU,OAAQE,EAAc,MAAM,EAEtEC,EAAK,UAAU,YAAcH,EAAU,OACvCG,EAAK,cAAc,YAAcD,EAAc,MACjD,CAEO,SAASE,GAAa,CAC3BD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASE,GAAa,CAC3BF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAEA,MAAMG,EAAY,SAAS,cAAc,YAAY,EAErD,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,QAAU,IACnBA,EAAU,OAAS,GAEnBA,EAAU,OAAS,EAEvB,CAAC,EAEDA,EAAU,iBAAiB,QAAS,IAAM,CACxC,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAQ,CAAE,CAChD,CAAC,EC3BM,SAASC,EAAmBC,EAAS,CAC1C,KAAM,CAAE,GAAAC,EAAI,UAAAC,EAAW,MAAAC,EAAO,YAAAC,EAAa,MAAAC,EAAO,SAAAC,EAAU,MAAAC,CAAO,EAAGP,EAEhEQ,EAAaC,EAAY,WAAYR,CAAE,EACvCS,EAASD,EAAY,OAAQR,CAAE,EAE/BU,EAAehB,EAAK,aAAa,cAAc,gBAAgB,EACrE,GAAI,CAACgB,EAAc,OAAO,QAAQ,MAAM,yBAAyB,EAEjEA,EAAa,UAAY;AAAA,2CACgBT,CAAS,UAAUC,CAAK;AAAA;AAAA,wCAE3BA,CAAK;AAAA;AAAA,qBAExBI,CAAK;AAAA,wBACFD,CAAQ;AAAA;AAAA,8CAEcF,CAAW;AAAA;AAAA;AAAA,gDAGTC,CAAK;AAAA;AAAA,IAInD,MAAMO,EAAcjB,EAAK,aAAa,cACpC,+BACJ,EACQkB,EAAUlB,EAAK,aAAa,cAAc,2BAA2B,EAEvEiB,IACFA,EAAY,YAAcJ,EACtB,uBACA,kBACJI,EAAY,QAAQ,GAAKX,GAGvBY,IACFA,EAAQ,YAAcH,EAAS,mBAAqB,cACpDG,EAAQ,QAAQ,GAAKZ,EAEzB,CAEO,SAASa,GAAY,CAC1BnB,EAAK,MAAM,UAAU,IAAI,gBAAgB,EACzC,OAAO,iBAAiB,UAAWoB,CAAS,CAC9C,CAEO,SAASC,GAAa,CAC3BrB,EAAK,MAAM,UAAU,OAAO,gBAAgB,EAC5C,MAAMgB,EAAehB,EAAK,aAAa,cAAc,gBAAgB,EACjEgB,IACFA,EAAa,UAAY,IAE3B,OAAO,oBAAoB,UAAWI,CAAS,CACjD,CAEA,SAASA,EAAUE,EAAO,CACpBA,EAAM,MAAQ,UAAUD,EAAU,CACxC,CAEArB,EAAK,MAAM,iBAAiB,QAASsB,GAAS,EAE1CA,EAAM,SAAWtB,EAAK,OACtBsB,EAAM,OAAO,QAAQ,mBAAmB,IAExCD,GAEJ,CAAC,EAEDrB,EAAK,aAAa,iBAAiB,QAASsB,GAAS,CACnD,MAAML,EAAcK,EAAM,OAAO,QAAQ,+BAA+B,EAClEJ,EAAUI,EAAM,OAAO,QAAQ,2BAA2B,EAEhE,GAAIL,EAAa,CACf,MAAMX,EAAK,CAACW,EAAY,QAAQ,GAChC,QAAQ,IAAI,kBAAmBX,CAAE,EACjCiB,EAAoB,WAAYjB,CAAE,EAClCW,EAAY,YAAcH,EAAY,WAAYR,CAAE,EAChD,uBACA,kBACJV,GACD,CAED,GAAIsB,EAAS,CACX,MAAMZ,EAAK,CAACY,EAAQ,QAAQ,GAC5B,QAAQ,IAAI,cAAeZ,CAAE,EAC7BiB,EAAoB,OAAQjB,CAAE,EAC9BY,EAAQ,YAAcJ,EAAY,OAAQR,CAAE,EACxC,mBACA,cACJV,GACD,CACH,CAAC,ECtFM,eAAe4B,EAAoBF,EAAO,CAC/C,MAAMG,EAAaH,EAAM,OAAO,QAAQ,kBAAkB,EAC1D,GAAI,CAACG,EAAY,OAEjB,MAAMd,EAAWc,EAAW,YAAY,KAAI,EAC5BzB,EAAK,eAAe,iBAAiB,kBAAkB,EAE/D,QAAQ0B,GAAOA,EAAI,UAAU,OAAO,yBAAyB,CAAC,EACtED,EAAW,UAAU,IAAI,yBAAyB,EAElDzB,EAAK,aAAa,UAAY,GAC9BA,EAAK,SAAS,UAAU,OAAO,oBAAoB,EAEnD,GAAI,CACF,IAAI2B,EAAW,CAAA,EAEXhB,IAAa,MAEfgB,EADY,MAAMC,EAAY,CAAE,MAAO,GAAI,KAAM,CAAC,CAAE,EAGpDD,EAAW,MAAME,EAAsBlB,CAAQ,EAG7CgB,EAAS,SAAW,EACtB3B,EAAK,SAAS,UAAU,IAAI,oBAAoB,EAEhD8B,EAAeH,CAAQ,CAE1B,MAAe,CACdI,EAAS,MAAM,CACb,QAAS,0CACT,SAAU,UAChB,CAAK,CACF,CACH,CAEO,eAAeC,EAAmBV,EAAO,CAC9C,MAAMW,EAAKX,EAAM,OAAO,QAAQ,mBAAmB,EACnD,GAAI,CAACW,EAAI,OAET,MAAM3B,EAAK2B,EAAG,QAAQ,GACtB,GAAK3B,EAEL,GAAI,CACF,MAAMD,EAAU,MAAM6B,EAAgB5B,CAAE,EACxCF,EAAmBC,CAAO,EAC1Bc,GACD,MAAe,CACdY,EAAS,MAAM,CACb,QAAS,yBACT,SAAU,UAChB,CAAK,CACF,CACH,CAEO,eAAeI,EAAmBb,EAAO,CAC9CA,EAAM,eAAc,EAEpB,MAAMc,EAAQpC,EAAK,YAAY,MAAM,KAAI,EAIzC,GAHAA,EAAK,aAAa,UAAY,GAC9BA,EAAK,SAAS,UAAU,OAAO,oBAAoB,EAE/CoC,IAAU,GAEd,GAAI,CACF,MAAMC,EAAU,MAAMC,EAAmBF,CAAK,EAE1CC,EAAQ,SAAW,EACrBrC,EAAK,SAAS,UAAU,IAAI,oBAAoB,EAEhD8B,EAAeO,EAAQ,MAAM,EAAG,EAAE,CAAC,CAEtC,MAAa,CACZN,EAAS,MAAM,CAAE,QAAS,uBAAwB,SAAU,UAAU,CAAE,CACzE,CACH,CAEO,eAAeQ,GAAoB,CACxCvC,EAAK,YAAY,MAAQ,GACzBA,EAAK,eAAe,OAAS,GAC7BA,EAAK,SAAS,UAAU,OAAO,oBAAoB,EACnDA,EAAK,aAAa,UAAY,GAE9B,GAAI,CACF,MAAM2B,EAAW,MAAMC,EAAY,CAAE,MAAO,GAAI,KAAM,CAAC,CAAE,EACzDE,EAAeH,CAAQ,CAC3B,MAAU,CACNI,EAAS,MAAM,CACb,QAAS,0BACT,SAAU,UAChB,CAAK,CACF,CACH,CAEO,SAASS,EAAkBlB,EAAO,CACvC,MAAMc,EAAQd,EAAM,OAAO,MAAM,KAAI,EACrCtB,EAAK,eAAe,OAASoC,IAAU,EACzC,CC9FA,IAAIK,EAAc,EAClB,MAAMC,EAAQ,GAEdC,EAAe,EACZ,KAAKC,GAAc,CAClBC,EAAiB,CAAC,MAAO,GAAGD,CAAU,CAAC,CAC3C,CAAG,EACA,MAAM,IAAM,CACXb,EAAS,MAAM,CAAE,QAAS,iCAAmC,CAAA,CACjE,CAAG,EAEH,eAAee,GAAe,CAC5B7C,IACA,MAAM,IAAI,QAAQ8C,GAAK,WAAWA,EAAG,CAAC,CAAC,EACvC,GAAI,CACF,MAAMC,GAAQP,EAAc,GAAKC,EAC3Bf,EAAW,MAAMC,EAAY,CAAE,MAAAc,EAAO,KAAAM,CAAM,CAAA,EAClDlB,EAAeH,CAAQ,CACxB,MAAa,CACZI,EAAS,MAAM,CAAE,QAAS,+BAAiC,CAAA,CAC/D,QAAY,CACR7B,GACD,CACH,CAEA4C,IAEA9C,EAAK,eAAe,iBAAiB,QAASwB,CAAmB,EACjExB,EAAK,aAAa,iBAAiB,QAASgC,CAAkB,EAC9DhC,EAAK,WAAW,iBAAiB,SAAUmC,CAAkB,EAC7DnC,EAAK,YAAY,iBAAiB,QAASwC,CAAiB,EAC5DxC,EAAK,eAAe,iBAAiB,QAASuC,CAAiB"}